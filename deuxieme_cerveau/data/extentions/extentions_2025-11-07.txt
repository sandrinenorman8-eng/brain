03:28:44: /**
 * üéØ EXTRACTEUR CHATHUB FINAL - EXTRAIT TOUT LE CONTENU
 * R√©cup√®re le textContent complet (inclus texte cach√©)
 */

(function() {
    'use strict';
    
    console.clear();
    console.log('%cüéØ EXTRACTEUR CHATHUB FINAL', 'font-size: 18px; font-weight: bold; color: #00ff00');
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // CONFIGURATION
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    const CONFIG = {
        models: ['GPT-5', 'Claude Sonnet 4.5', 'Gemini 2.5 Pro', 'Grok 4', 'Qwen3 Max', 'o3'],
        includeHidden: true  // Inclure le contenu cach√© (pens√©es, etc.)
    };
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // FONCTIONS PRINCIPALES
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    function findPanels() {
        const grid = document.querySelector('.relative.grid.auto-rows-fr') || 
                     document.querySelector('[class*="grid-cols-3"]');
        
        if (!grid) return [];
        
        return Array.from(grid.children)
            .filter(child => child.classList.contains('group/panel'))
            .slice(0, 6);
    }
    
    function extractFullContent(panel, index) {
        try {
            // Chercher le div principal avec le contenu
            const mainContent = panel.querySelector('.relative.h-full.overflow-hidden') ||
                              panel.querySelector('[class*="overflow-hidden"]') ||
                              panel;
            
            // STRAT√âGIE 1: Extraire textContent (inclut texte cach√©)
            let fullText = mainContent.textContent || '';
            
            // STRAT√âGIE 2: Si on veut seulement le visible, utiliser innerText
            let visibleText = mainContent.innerText || '';
            
            // Nettoyer le texte
            fullText = fullText
                .replace(/\n{3,}/g, '\n\n')
                .replace(/\s{2,}/g, ' ')
                .trim();
            
            visibleText = visibleText
                .replace(/\n{3,}/g, '\n\n')
                .trim();
            
            // Structure de la conversation
            const structure = {
                userMessages: [],
                botMessages: [],
                thinking: []
            };
            
            // Extraire les messages utilisateur
            const userMsgDivs = panel.querySelectorAll('[class*="flex-row-reverse"], [class*="user"]');
            userMsgDivs.forEach(div => {
                const text = div.innerText?.trim();
                if (text && text.length > 2 && !text.includes('Claude Sonnet')) {
                    structure.userMessages.push(text);
                }
            });
            
            // Extraire les r√©ponses du bot
            const botMsgDivs = panel.querySelectorAll('p, pre, [class*="markdown"]');
            botMsgDivs.forEach(div => {
                const text = div.innerText?.trim();
                if (text && text.length > 10 && !structure.botMessages.includes(text)) {
                    structure.botMessages.push(text);
                }
            });
            
            // Extraire les "pens√©es" (thinking)
            const thinkingMatches = fullText.match(/Pens√©e pour \d+ seconds?.*?(?=\n|$)/g);
            if (thinkingMatches) {
                structure.thinking = thinkingMatches;
            }
            
            // Construire la conversation format√©e
            let formattedConversation = '';
            
            // Ajouter le nom du mod√®le
            formattedConversation += `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n`;
            formattedConversation += `${CONFIG.models[index] || 'Chatbot ' + (index + 1)}\n`;
            formattedConversation += `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n`;
            
            // Ajouter les messages utilisateur
            if (structure.userMessages.length > 0) {
                formattedConversation += `üë§ QUESTION:\n`;
                structure.userMessages.forEach(msg => {
                    formattedConversation += `${msg}\n`;
                });
                formattedConversation += `\n`;
            }
            
            // Ajouter les pens√©es si pr√©sentes
            if (structure.thinking.length > 0) {
                formattedConversation += `üí≠ R√âFLEXION:\n`;
                structure.thinking.forEach(thought => {
                    formattedConversation += `${thought}\n`;
                });
                formattedConversation += `\n`;
            }
            
            // Ajouter la r√©ponse
            if (structure.botMessages.length > 0) {
                formattedConversation += `ü§ñ R√âPONSE:\n`;
                structure.botMessages.forEach(msg => {
                    formattedConversation += `${msg}\n\n`;
                });
            }
            
            // Si on n'a rien trouv√© avec la structure, prendre tout le texte
            if (structure.userMessages.length === 0 && structure.botMessages.length === 0) {
                formattedConversation += CONFIG.includeHidden ? fullText : visibleText;
            }
            
            return {
                index: index + 1,
                model: CONFIG.models[index] || `Chatbot ${index + 1}`,
                text: formattedConversation.trim(),
                fullText: fullText,
                visibleText: visibleText,
                fullLength: fullText.length,
                visibleLength: visibleText.length,
                structure: structure
            };
            
        } catch (error) {
            console.error(`‚ùå Erreur panel ${index + 1}:`, error);
            return {
                index: index + 1,
                model: CONFIG.models[index] || `Chatbot ${index + 1}`,
                text: `Erreur d'extraction: ${error.message}`,
                fullLength: 0,
                visibleLength: 0,
                error: true
            };
        }
    }
    
    function downloadFile(content, filename) {
        const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        
        link.href = url;
        link.download = filename;
        link.style.display = 'none';
        
        document.body.appendChild(link);
        link.click();
        
        setTimeout(() => {
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }, 100);
    }
    
    function formatOutput(data) {
        const date = new Date().toLocaleString('fr-FR');
        const separator = '‚ïê'.repeat(70);
        
        return `${separator}
CHATHUB - EXPORT COMPLET
${separator}

üìä M√âTADONN√âES
   ‚Ä¢ Chatbot: ${data.index}/6
   ‚Ä¢ Mod√®le: ${data.model}
   ‚Ä¢ Date: ${date}
   ‚Ä¢ Texte visible: ${data.visibleLength} caract√®res
   ‚Ä¢ Texte complet: ${data.fullLength} caract√®res
   ‚Ä¢ URL: ${window.location.href}

${separator}

${data.text}

${separator}
FIN DE L'EXPORT - ${data.model}
${separator}`;
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // EXTRACTION ET T√âL√âCHARGEMENT
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    async function extractAll() {
        const btn = document.getElementById('chathub-final-btn');
        if (btn) {
            btn.textContent = '‚è≥ Extraction...';
            btn.disabled = true;
        }
        
        try {
            console.log('\nüîç Recherche des panels...');
            
            const panels = findPanels();
            
            if (panels.length === 0) {
                alert('‚ùå Aucun panel d√©tect√© !');
                return;
            }
            
            console.log(`‚úì ${panels.length} panels trouv√©s\n`);
            console.log('üì• Extraction en cours...\n');
            
            // Extraire chaque panel
            const results = panels.map((panel, i) => extractFullContent(panel, i));
            
            // Afficher le r√©sum√©
            console.log('üìä R√âSULTATS:\n');
            results.forEach(r => {
                console.log(`${r.index}. ${r.model}`);
                console.log(`   Visible: ${r.visibleLength} chars`);
                console.log(`   Complet: ${r.fullLength} chars`);
                console.log(`   Questions: ${r.structure?.userMessages?.length || 0}`);
                console.log(`   R√©ponses: ${r.structure?.botMessages?.length || 0}`);
                console.log(`   Pens√©es: ${r.structure?.thinking?.length || 0}`);
                console.log('');
            });
            
            // T√©l√©charger les fichiers
            const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
            
            for (const result of results) {
                if (result.error) {
                    console.warn(`‚ö†Ô∏è Skip ${result.model} (erreur)`);
                    continue;
                }
                
                const filename = `chathub_${result.index}_${result.model.replace(/\s+/g, '_')}_${timestamp}.txt`;
                const content = formatOutput(result);
                downloadFile(content, filename);
                console.log(`‚úÖ ${filename}`);
                await new Promise(r => setTimeout(r, 100));
            }
            
            alert(`‚úÖ Extraction termin√©e !\n\n${results.length} fichier(s) t√©l√©charg√©(s) üì•`);
            console.log('\n‚úÖ TERMIN√â !');
            
        } catch (error) {
            console.error('‚ùå Erreur:', error);
            alert('‚ùå Erreur: ' + error.message);
        } finally {
            if (btn) {
                btn.textContent = 'üì• Extraire les 6 Chatbots';
                btn.disabled = false;
            }
        }
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // INTERFACE
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    function createButton() {
        const existing = document.getElementById('chathub-final-btn');
        if (existing) existing.remove();
        
        const btn = document.createElement('button');
        btn.id = 'chathub-final-btn';
        btn.textContent = 'üì• Extraire les 6 Chatbots';
        
        btn.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999999;
            padding: 16px 32px;
            background: linear-gradient(135deg, #00ff88 0%, #00cc66 100%);
            color: #000;
            border: none;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 900;
            font-family: system-ui, -apple-system, sans-serif;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        `;
        
        btn.onmouseover = () => {
            btn.style.transform = 'translateY(-3px) scale(1.05)';
            btn.style.boxShadow = '0 15px 40px rgba(0, 255, 136, 0.6)';
        };
        
        btn.onmouseout = () => {
            btn.style.transform = 'translateY(0) scale(1)';
            btn.style.boxShadow = '0 10px 30px rgba(0, 255, 136, 0.4)';
        };
        
        btn.onclick = extractAll;
        
        document.body.appendChild(btn);
        console.log('‚úÖ Bouton cr√©√© - Pr√™t √† extraire !');
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // INITIALISATION
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => setTimeout(createButton, 500));
    } else {
        setTimeout(createButton, 500);
    }
    
    console.log('‚úÖ Extracteur charg√© et pr√™t !');
    
})();
03:29:37: AI_Prompt_Enricher_CLEAN_20251012_043445
03:30:05: extracteur chat txt
03:30:46: deuxieme_cerveau
03:35:44: Protocole r√©ussite. R√©inscript qui marche √† travers la console directement utiliser le script final pour cr√©er l'extension.
